{% load static %}
<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip cost login</title>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'trip_calculator/style/add_friend.css' %}">
    <link rel="stylesheet" href="{% static 'trip_calculator/style/common.css' %}">
</head>


<body class="background-img-style background-img-style" style="background-image: url('{{ background.img_url }}');">
{% include 'trip_calculator/navigation.html' %}

{% csrf_token %}
<div id="form_content">
</div>
<main>

    <div class="container-fluid container-main border border-dark-subtle rounded">

        <div class="row justify-content-between">
            <div class="col-sm-2">
                <div class="row">
                    <div class="list-group ps-1 pe-1 pt-2  pb-2">
                        <button type="button" class="list-group-item list-group-item-action" id="main_trip">Your trips
                        </button>
                        <button type="button" class="list-group-item list-group-item-action" id="main_friend">Friends
                        </button>
                        <button type="button" class="list-group-item list-group-item-action" id="main_cost">Cost
                        </button>
                        <button type="button" class="list-group-item list-group-item-action" id="main_account">Account
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-sm-10 pt-2 pb-2">
                <div class="container-table" style=" min-height: 250px;">
                    <div class="row justify-content-start">
                        <div id="context table">
                            <table id="main-trip-table" class="table table-light table-sm text-start small">
                                <thead>
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Description</th>
                                    <th scope="col">Squad</th>
                                    <th scope="col">Cost</th>
                                </tr>
                                </thead>

                                <tbody class="table-group-divider">
                                {% for trip in trip_list %}
                                <tr>
                                    <td scope="col">{{ trip.name }}</td>
                                    <td scope="col">{{ trip.description }}</td>
                                    <td scope="col">
                                        <div class="dropdown">
                                            <button class="btn btn-primary dropdown-toggle btn-sm table-button" type="button"
                                                    id="dropdownMenuButtonTrip"
                                                    data-bs-toggle="dropdown" aria-expanded="false">Expand
                                            </button>
                                            <ul class="dropdown-menu background-dropdown-color dropdown-list"
                                                aria-labelledby="dropdownMenuButtonTrip"
                                                style="width: 150px; max-height: 250px; white-space: nowrap; overflow-y: auto;">
                                                {% for person in trip.squad %}
                                                <li class="ps-2 pe-2">{{ person.name }}</li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </td>
                                    <td scope="col">{{ trip.cost }}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                                <caption class="pt-2">
                                    <a href="{% url 'create_trip_view' %}" class="btn btn-success bi footer-tabel-button">Create trip</a>
                                    <a href="{% url 'create_trip_view' %}" class="btn btn-primary bi footer-tabel-button">Edit Trip</a>
                                </caption>
                            </table>


                            <table id="main-friend-table" class="table table-light table-sm text-start small" >
                                <thead>
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Lastname</th>
                                    <th scope="col">Trips</th>
                                    <th scope="col">Added</th>
                                </tr>
                                </thead>

                                <tbody class="table-group-divider">
                                {% for friend in friends_list %}
                                <tr>
                                    <td scope="col">{{ friend.name }}</td>
                                    <td scope="col">{{ friend.lastname }}</td>
                                    {% if friend.trips|length > 0 %}
                                    <td scope="col">
                                        <div class="dropdown">
                                            <button class="btn btn-primary dropdown-toggle btn-sm table-button" type="button"
                                                    id="dropdownMenuButtonFriend"
                                                    data-bs-toggle="dropdown" aria-expanded="false">Expand
                                            </button>
                                            <ul class="dropdown-menu background-dropdown-color dropdown-list"
                                                aria-labelledby="dropdownMenuButtonFriend"
                                                style="width: 150px; max-height: 250px; white-space: nowrap; overflow-y: auto;">
                                                {% for trip in friend.trips %}
                                                <li class="ps-2 pe-2">{{ trip.name }}</li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </td>
                                    {% else %}
                                    <td scope="col">-</td>
                                    {% endif %}
                                    <td scope="col">{{ friend.added }}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                                <caption class="pt-2">
                                    <a href="{% url 'invite_friend_view' %}" class="btn btn-success bi footer-tabel-button">Invite
                                        friend</a>
                                    <a href="{% url 'invite_friend_view' %}" class="btn btn-primary bi footer-tabel-button">Edit friend</a>
                                </caption>
                            </table>


                            <table id="main-account-table" class="table table-light table-sm text-start small">
                                <thead>
                                <tr>
                                    <th scope="col">Firstname</th>
                                    <th scope="col">Lastname</th>
                                    <th scope="col">Email address</th>
                                    <th scope="col">Created</th>
                                </tr>
                                </thead>

                                <tbody class="table-group-divider">

                                <tr>
                                    <td scope="col">{{ user.name }}</td>
                                    <td scope="col">{{ user.lastname }}</td>
                                    <td scope="col">{{ user.email }}</td>
                                    <td scope="col">{{ user.added }}</td>
                                </tr>
                                </tbody>
                                <caption class="pt-2">
                                    <a href="{% url 'create_trip_view' %}" class="btn btn-primary bi footer-tabel-button">Edit account</a>
                                </caption>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>

<script src="{% static 'trip_calculator/js/add_cost.js' %}"></script>
</html>
